{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://moltcode.dev/registry/lsp-servers.schema.json",
  "title": "LSP Server Registry",
  "description": "Registry of Language Server Protocol (LSP) server configurations",
  "type": "object",
  "required": ["version", "servers"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Registry schema version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    },
    "servers": {
      "type": "array",
      "description": "List of LSP server definitions",
      "items": {
        "$ref": "#/definitions/server"
      }
    }
  },
  "definitions": {
    "server": {
      "type": "object",
      "required": ["id", "name", "label", "command", "languages"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the server",
          "pattern": "^[a-z0-9-]+$"
        },
        "name": {
          "type": "string",
          "description": "Executable or package name"
        },
        "label": {
          "type": "string",
          "description": "Human-readable display name"
        },
        "description": {
          "type": "string",
          "description": "Short description of the server"
        },
        "homepage": {
          "type": "string",
          "format": "uri",
          "description": "Project homepage URL"
        },
        "command": {
          "type": "string",
          "description": "Command to execute the server"
        },
        "args": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Command-line arguments"
        },
        "languages": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Supported language identifiers",
          "minItems": 1
        },
        "file_patterns": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Glob patterns for matching files"
        },
        "root_markers": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Files/directories that indicate project root"
        },
        "install": {
          "type": "object",
          "description": "Installation commands by package manager",
          "additionalProperties": { "type": "string" }
        },
        "settings": {
          "type": "object",
          "description": "Default LSP initialization settings",
          "additionalProperties": true
        }
      }
    }
  }
}
