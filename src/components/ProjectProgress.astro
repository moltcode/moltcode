---
const roadmapItems = [
  { label: "Core Editor", status: "done" },
  { label: "Multi-Agent Support", status: "done" },
  { label: "Process Management", status: "done" },
  { label: "Issue Tracking", status: "done" },
  { label: "Mac Release", status: "done" },
  { label: "Issue Graphs & Dependencies", status: "done" },
  { label: "v0.0.3 Release", status: "done" },
  { label: "Stability & Polish", status: "in-progress" },
  { label: "Agent-Controlled IDE", status: "in-progress" },
  { label: "Solving Context for CLI Agents", status: "pending" },
  { label: "Mobile Companion", status: "pending" },
];
---

<aside class="project-progress">
  <div class="progress-inner">
    <!-- Title -->
    <div class="progress-title">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-theme-accent"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
      <span class="text-xs font-semibold text-theme-primary/60 uppercase tracking-wider">Roadmap</span>
    </div>

    <!-- Stepper -->
    <div class="roadmap-stepper">
      {roadmapItems.map((item, index) => (
        <div class={`stepper-item ${item.status}`}>
          <div class="stepper-marker">
            {item.status === 'done' ? (
              <svg width="9" height="9" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
            ) : (
              <span class="stepper-dot"></span>
            )}
          </div>
          <span class="stepper-label">{item.label}</span>
        </div>
      ))}
    </div>

    <!-- GitHub CTA -->
    <a href="https://github.com/moltcode/moltcode" target="_blank" rel="noopener" class="github-link">
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
      </svg>
      <span>Follow on GitHub</span>
    </a>
  </div>
</aside>

<style>
  .project-progress {
    position: sticky;
    top: 0;
    height: 100vh;
    overflow-y: auto;
    background: var(--color-glass-surface);
    border-left: 1px solid var(--color-border);
    backdrop-filter: blur(8px);
  }

  .progress-inner {
    padding: 4.5rem 1rem 1.5rem;
  }

  .progress-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.25rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--color-border);
  }

  /* Stepper */
  .roadmap-stepper {
    position: relative;
    padding-left: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .stepper-item {
    position: relative;
    padding-bottom: 0.75rem;
    padding-left: 1rem;
    display: flex;
    align-items: flex-start;
  }

  .stepper-item:last-child { padding-bottom: 0; }

  .stepper-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.4rem;
    bottom: 0;
    width: 1.5px;
    background: var(--color-border-strong);
  }

  .stepper-item:last-child::before { display: none; }

  .stepper-marker {
    position: absolute;
    left: -0.3rem;
    top: 0.15rem;
    width: 0.75rem;
    height: 0.75rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
  }

  .stepper-item.done .stepper-marker {
    background: #28c840;
    color: var(--color-bg);
  }

  .stepper-item.done::before { background: #28c840; }

  .stepper-item.in-progress .stepper-marker {
    background: var(--color-accent);
    box-shadow: 0 0 6px rgba(var(--color-accent-rgb), 0.5);
  }

  .stepper-item.in-progress::before {
    background: linear-gradient(to bottom, var(--color-accent), var(--color-border-strong));
  }

  .stepper-item.pending .stepper-marker {
    background: var(--color-surface);
    border: 1.5px solid var(--color-border-strong);
  }

  .stepper-dot {
    width: 3px;
    height: 3px;
    border-radius: 50%;
  }

  .stepper-item.in-progress .stepper-dot {
    background: var(--color-bg);
    animation: pulse-dot 2s infinite;
  }

  .stepper-item.pending .stepper-dot {
    background: var(--color-secondary);
    opacity: 0.4;
  }

  @keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .stepper-label {
    font-size: 0.75rem;
    line-height: 1.3;
  }

  .stepper-item.done .stepper-label { color: var(--color-secondary); opacity: 0.7; }
  .stepper-item.in-progress .stepper-label { color: var(--color-accent); font-weight: 500; }
  .stepper-item.pending .stepper-label { color: var(--color-secondary); opacity: 0.5; }

  .github-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    color: var(--color-secondary);
    font-size: 0.75rem;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .github-link:hover {
    border-color: var(--color-accent);
    color: var(--color-primary);
  }

  @media (max-width: 1024px) {
    .project-progress { display: none; }
  }
</style>
